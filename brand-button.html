<!-- Custom Element - brand button
    Author: Rahat Khanna
    Session: Demystifying Web Components 
    Conference: JSFoo 2017
-->
<template>
    <style>

    :host {

    }
           .brandbtn-container{
               padding:3px;
           }

           .brandbtn-container button{
               background: #d6d6d6;
               border:1px solid #aeaeae;
               border-radius: 5px;
               outline: none;
               cursor: pointer;
           }

           .brandbtn-container button:hover{
               background: #eaeaea;
           }

           .small{
               font-size:12px;
               padding: 5px 15px;
           }

           .medium{
               font-size:15px;
               padding: 10px 25px;
           }

           .large{
               font-size:18px;
               padding: 15px 35px;
           }
    </style>
    <div class="brandbtn-container">
        <button>
            <slot></slot>
        </button>
    </div>
</template>
<script>
(function(window, document) {
    // Refers to the "importer", which is index.html
    var thatDoc = document;

    // Refers to the "importee", which is index.html
    var thisDoc = (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

    // Gets content from <template>.
    var template = thisDoc.querySelector( 'template' ).content;

    // Shim Shadow DOM styles if needed
    if (window.ShadowDOMPolyfill) {
        WebComponents.ShadowCSS.shimStyling(template, 'vimeo');
    }

    class BrandButton extends HTMLElement {

        constructor() {
            super();
        }

        // Monitor the 'color' attribute for changes.
        static get observedAttributes() { return ['color']; }

        connectedCallback() {
            console.log('Custom element brand button is connected');

            var shadowRoot = this.attachShadow({mode:'open'});  

            // Adds a template clone into shadow root.
            var clone = thatDoc.importNode( template, true );
            shadowRoot.appendChild(clone);

            // get the value of the "type" attribute
            var type = this.getAttribute("type");

            var btnContainer = shadowRoot.querySelector('.brandbtn-container button');
            // Validating the allowed types and adding it as classname
            if(["small","medium","large"].indexOf(type) > -1){
                btnContainer.classList.add(type);
            }
        }

        // Respond to attribute changes.
        attributeChangedCallback(attr, oldValue, newValue) {
            if (attr == 'type') {
             this._type = `${newValue}`;
            }

            if (attr == 'color') {
                
            }
        }

        // Set the "type" property
        set type(option) {
            this.setAttribute("type", option);
        }

        // Get the "type" property
        get type() {
            return this.hasAttribute("type");
        }

        set color(color) {
            this.setAttribute("color", color);
        }

        get color(color) {
            return this.hasAttribute("color");
        }
    }

    window.customElements.define('brand-button', BrandButton);
})(window, document);
</script>